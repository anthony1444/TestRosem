{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { OfferCreationComponent } from \"../offer-creation/offer-creation.component\";\nlet OfferListComponent = class OfferListComponent {\n  constructor(markeplaceApiService, dialog) {\n    this.markeplaceApiService = markeplaceApiService;\n    this.dialog = dialog;\n    this.pageSize = 10;\n    this.page = 1;\n    this.offers = [];\n    this.total = 0;\n    this.totalPages = 0;\n  }\n  ngOnInit() {\n    this.markeplaceApiService.getOffersCount().subscribe(data => {\n      this.total = data;\n      this.totalPages = Math.round(this.total / this.pageSize);\n      this.numbers = Array.from({\n        length: this.page\n      }, (v, k) => k + 1);\n    });\n    this.markeplaceApiService.getOffers(this.page, this.pageSize).subscribe({\n      next: offers => {\n        this.offers = offers;\n      }\n    });\n  }\n  getOffersPage(page, pageSize) {\n    this.markeplaceApiService.getOffers(page, pageSize).subscribe({\n      next: offers => {\n        this.offers = offers;\n      }\n    });\n  }\n  getNextOffersPage(page) {\n    if (this.numbers[page - 1] === this.totalPages) {\n      return;\n    }\n    this.numbers = this.numbers.map(n => n + 1);\n    this.getOffersPage(this.numbers[page - 1], this.pageSize);\n  }\n  getPreviousOffersPage() {\n    if (this.numbers[0] === 1) {\n      return;\n    }\n    this.numbers = this.numbers.map(n => n - 1);\n    this.getOffersPage(this.numbers[0], this.pageSize);\n  }\n  getFirstOffersPage() {\n    if (this.numbers[0] === 1) {\n      return;\n    }\n    this.numbers = Array.from({\n      length: this.page\n    }, (v, k) => k + 1);\n  }\n  getLastOffersPage() {\n    if (this.numbers[this.page - 1] === this.totalPages) {\n      return;\n    }\n    const lastNumbers = this.totalPages - 10;\n    this.getFirstOffersPage();\n    this.numbers = this.numbers.map(n => n + lastNumbers);\n  }\n  openDialog() {\n    this.dialog.open(OfferCreationComponent, {\n      width: '400px',\n      height: '600px'\n    });\n  }\n};\nOfferListComponent = __decorate([Component({\n  selector: \"app-offer-list\",\n  templateUrl: \"./offer-list.component.html\",\n  styleUrls: [\"./offer-list.component.scss\"]\n})], OfferListComponent);\nexport { OfferListComponent };","map":{"version":3,"names":["Component","OfferCreationComponent","OfferListComponent","constructor","markeplaceApiService","dialog","pageSize","page","offers","total","totalPages","ngOnInit","getOffersCount","subscribe","data","Math","round","numbers","Array","from","length","v","k","getOffers","next","getOffersPage","getNextOffersPage","map","n","getPreviousOffersPage","getFirstOffersPage","getLastOffersPage","lastNumbers","openDialog","open","width","height","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Datos\\Desktop\\Github\\marketplace-master\\WebApp\\marketplace\\src\\app\\offers\\offer-list\\offer-list.component.ts"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { MarketplaceApiService } from \"src/app/core/marketplace-api/marketplace-api.service\";\nimport { OfferModel } from \"src/app/core/marketplace-api/models/offer.model\";\nimport {MatDialog } from '@angular/material/dialog';\nimport { OfferCreationComponent } from \"../offer-creation/offer-creation.component\";\n\n@Component({\n  selector: \"app-offer-list\",\n  templateUrl: \"./offer-list.component.html\",\n  styleUrls: [\"./offer-list.component.scss\"],\n})\nexport class OfferListComponent implements OnInit {\n  pageSize = 10;\n  page = 1;\n  offers: OfferModel[] = [];\n  total = 0;\n  totalPages = 0;\n  numbers: number[];\n\n\n  constructor(public markeplaceApiService: MarketplaceApiService, public dialog:MatDialog) {}\n\n  ngOnInit(): void {\n    this.markeplaceApiService.getOffersCount().subscribe((data) => {\n      this.total = data;\n      this.totalPages = Math.round(this.total / this.pageSize);\n      this.numbers =  Array.from({length:this.page},(v,k)=>k+1);\n    });\n\n    this.markeplaceApiService.getOffers(this.page, this.pageSize).subscribe({\n      next: (offers: OfferModel[]) => {\n        this.offers = offers;\n      },\n    });\n  }\n\n  getOffersPage(page:number,pageSize:number) {\n    this.markeplaceApiService.getOffers(page, pageSize).subscribe({\n      next: (offers: OfferModel[]) => {\n        this.offers = offers;\n      },\n    });\n  }\n\n  getNextOffersPage(page:number){\n    if (this.numbers[page-1]=== this.totalPages) {\n      return;\n    }\n    this.numbers = this.numbers.map(n => n + 1);\n    this.getOffersPage(this.numbers[page-1],this.pageSize);\n  }\n\n  getPreviousOffersPage(){\n    if (this.numbers[0]=== 1) {\n      return;\n    }\n    this.numbers = this.numbers.map(n => n - 1);\n    this.getOffersPage(this.numbers[0],this.pageSize);\n  }\n\n\n  getFirstOffersPage(){\n    if (this.numbers[0]=== 1) {\n      return;\n    }\n    this.numbers =  Array.from({length:this.page},(v,k)=>k+1);\n  }\n\n  getLastOffersPage(){\n    if (this.numbers[this.page-1]=== this.totalPages) {\n      return;\n    }\n    const lastNumbers = this.totalPages - 10;\n    this.getFirstOffersPage();\n    this.numbers = this.numbers.map(n => n + lastNumbers);\n  }\n\n  openDialog(){\n    this.dialog.open(OfferCreationComponent, {\n      width: '400px',\n      height:'600px'\n    });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}